@using Microsoft.AspNetCore.Http
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neighborly</title>
    <link rel="stylesheet" href="~/css/output.css" />
</head>
<body bg-gray-100>
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="neighborly-container mx-auto px-4 max-w-screen-xl">
            <div class="flex justify-between items-center py-4">
                <a href="@Url.Action("Index", "Home")" class="flex items-center space-x-2 flex-shrink-0 max-w-[150px]">
                    <div class="header-logo h-16 w-16 text-neighborly-600">
                        <img src="~/assets/logo.png" alt="Neighborly Logo" class="h-full w-full object-contain">
                    </div>
                    <span class="text-xl font-bold text-neighborly-600">Neighborly</span>
                </a>

                <!-- searchbar -->
                <div class="hidden md:block flex-1 max-w-md mx-4"> 
                    <div class="relative">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="M21 21l-4.3-4.3"></path>
                        </svg>
                        <input type="text" placeholder="Szukaj ogłoszeń..." class="flex h-10 w-full rounded-md border border-gray-300 bg-white px-10 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-gray-700 placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-neighborly-500 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm">
                    </div>
                </div>

    <nav class="hidden md:flex items-center space-x-1">
    <!-- Ilogo -->
        <a href="/" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-accent hover:text-accent-foreground h-10 w-10">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house h-5 w-5">
                <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path>
                <path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            </svg>
        </a>

    <!-- Listings -->
    <a href="~/Listings/Index" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-accent hover:text-accent-foreground h-10 w-10">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list h-5 w-5">
            <path d="M3 12h.01"></path>
            <path d="M3 18h.01"></path>
            <path d="M3 6h.01"></path>
            <path d="M8 12h13"></path>
            <path d="M8 18h13"></path>
            <path d="M8 6h13"></path>
        </svg>
    </a>
     @if (Context.Session.GetInt32("UserId") != null)
    {
        <!-- New listing -->
        <a href="/Listings/NewListing" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-accent hover:text-accent-foreground h-10 w-10">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-plus h-5 w-5">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M8 12h8"></path>
                <path d="M12 8v8"></path>
            </svg>
        </a>
        <!-- Notifications -->
        <a class="inline-flex items-center justify-center gap-2 whitespace-nowrap ink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10" href="/powiadomienia">
            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9z" />
                <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0" />
            </svg>
        </a>
        <!-- Chat -->
        <a class="inline-flex items-center justify-center gap-2 whitespace-nowrap ink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10" href="/chat">
            <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />
            </svg>
        </a>
        <!-- Account -->
        <a href="~/Account/MyAccount" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 hover:bg-accent hover:text-accent-foreground h-10 w-10">
            <svg class="lucide lucide-user h-5 w-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
            </svg>
        </a>
    }
    else
    {
        <a href="~/Account/Login" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 bg-primary text-white hover:bg-primary/90 h-10 px-4 py-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2 h-4 w-4">
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                <polyline points="10 17 15 12 10 7"></polyline>
                <line x1="15" x2="3" y1="12" y2="12"></line>
            </svg>
            Zaloguj się
        </a>
    }
</nav>

                <!-- Mobile button -->
                <button id="mobile-menu-button" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-10 w-10 md:hidden">
                    <svg id="menu-icon" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                    <svg id="close-icon" class="h-6 w-6 hidden" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Mobile nav -->
            <div id="mobile-menu" class="hidden md:hidden py-4 pb-6 border-t border-gray-200">
                <div class="relative mb-4">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="M21 21l-4.3-4.3"></path>
                    </svg>
                    <input type="text" placeholder="Szukaj ogłoszeń..." class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10 focus-visible:ring-neighborly-500" />
                </div>
                <div class="space-y-3">
                    <a href="~/Home/Index" class="flex items-center px-3 py-2 text-base font-medium text-gray-700 rounded-md hover:bg-gray-50" onclick="toggleMenu()">
                        <svg class="lucide lucide-house mr-3 h-5 w-5 text-gray-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path>
                            <path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                        </svg>
                        Strona główna
                    </a>
                    <a href="~/Listings/Index" class="flex items-center px-3 py-2 text-base font-medium text-gray-700 rounded-md hover:bg-gray-50" onclick="toggleMenu()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list mr-3 h-5 w-5 text-gray-500">
                            <path d="M3 12h.01"></path>
                            <path d="M3 18h.01"></path>
                            <path d="M3 6h.01"></path>
                            <path d="M8 12h13"></path>
                            <path d="M8 18h13"></path>
                            <path d="M8 6h13"></path>
                        </svg>
                        Ogłoszenia
                    </a>
                     @if (Context.Session.GetInt32("UserId") != null)
                    {
                         <a href="~/Listings/Create" class="flex items-center px-3 py-2 text-base font-medium text-gray-700 rounded-md hover:bg-gray-50" onclick="toggleMenu()">
                            <svg class="lucide lucide-circle-plus mr-3 h-5 w-5 text-gray-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10"></circle>
                                <path d="M8 12h8"></path>
                                <path d="M12 8v8"></path>
                            </svg>
                            Dodaj ogłoszenie
                        </a>
                        <a class="flex items-center px-3 py-2 text-base font-medium text-gray-700 rounded-md hover:bg-gray-50" href="/powiadomienia" onclick="toggleMenu()">
                            <svg class="lucide lucide-user mr-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9z" />
                                <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0" />
                            </svg>
                            Powiadomienia
                        </a>
                        <a class="flex items-center px-3 py-2 text-base font-medium text-gray-700 rounded-md hover:bg-gray-50" href="/chat" onclick="toggleMenu()">
                            <svg class="lucide lucide-user mr-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                                <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />
                            </svg>
                            Wiadomości
                        </a>
                        <a href="~/Account/MyAccount" class="flex items-center px-3 py-2 text-base font-medium text-gray-700 rounded-md hover:bg-gray-50" onclick="toggleMenu()">
                            <svg class="lucide lucide-user mr-3 h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            Moje konto
                        </a>
                    }
                    
                </div>
            </div>
        </div>
    </header>

    <script>
        document.getElementById("mobile-menu-button").addEventListener("click", toggleMenu);
        function toggleMenu() {
            var menu = document.getElementById("mobile-menu");
            var menuIcon = document.getElementById("menu-icon");
            var closeIcon = document.getElementById("close-icon");
            if (menu.classList.contains("hidden")) {
                menu.classList.remove("hidden");
                menuIcon.classList.add("hidden");
                closeIcon.classList.remove("hidden");
            } else {
                menu.classList.add("hidden");
                menuIcon.classList.remove("hidden");
                closeIcon.classList.add("hidden");
            }
        }
    </script>

        <!-- Main Content -->
        <main class="flex-grow">
            @RenderBody()
        </main>

        <!-- Footer -->
        <footer class="bg-gray-100 py-4 text-center text-gray-500">
            © 2025 Neighborly. Wszelkie prawa zastrzeżone.
        </footer>
    </div>
    </div>
</body>
</html>
